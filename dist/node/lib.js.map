{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./lib/utils/each.js","webpack:///./lib/utils/extend.js","webpack:///./lib/config-default.js","webpack:///./lib/index.js","webpack:///./node_modules/promise-polyfill/src/finally.js","webpack:///./node_modules/promise-polyfill/src/index.js","webpack:///./node_modules/promise-polyfill/src/polyfill.js","webpack:///./node_modules/component-emitter/index.js","webpack:///./lib/utils/localStorage.js","webpack:///./lib/utils/queue.js","webpack:///./node_modules/whatwg-fetch/fetch.js","webpack:///./lib/extend-events.js","webpack:///./lib/helpers/getScreenProfile.js","webpack:///./lib/helpers/getWindowProfile.js","webpack:///./lib/helpers/getDomNodePath.js","webpack:///./lib/browser.js","webpack:///./lib/api-client.js","webpack:///./lib/utils/parse-params.js","webpack:///./lib/utils/serialize.js","webpack:///./lib/utils/optOut.js","webpack:///./lib/utils/listener.js","webpack:///./lib/record-events-browser.js","webpack:///./lib/utils/base64.js","webpack:///./lib/utils/deepExtend.js","webpack:///./lib/utils/fetchRetry.js","webpack:///./lib/utils/unique.js","webpack:///./lib/utils/md5.js","webpack:///./lib/utils/cache-node.js","webpack:///./lib/defer-events.js","webpack:///./lib/browser-auto-tracking.js","webpack:///./lib/helpers/getBrowserProfile.js","webpack:///./lib/helpers/getDatetimeIndex.js","webpack:///./lib/helpers/getDomainName.js","webpack:///./lib/helpers/getDomNodeProfile.js","webpack:///./lib/helpers/getScrollState.js","webpack:///./lib/helpers/getUniqueId.js","webpack:///./lib/utils/cookie.js","webpack:///./node_modules/js-cookie/src/js.cookie.js","webpack:///./lib/utils/timer.js"],"names":["module","exports","each","o","cb","s","n","Array","length","call","hasOwnProperty","extend","target","i","arguments","prop","configDefault","queue","capacity","interval","api_config","host","process","env","API_HOST","basePath","protocol","requestType","retry","limit","initialDelay","retryOnResponseStatuses","unique","cache","dbName","dbCollectionName","dbCollectionKey","maxAge","MurdockCore","helpers","prototype","observers","on","client","extensions","events","collections","config","respectDoNotTrack","doNotTrack","optOut","optedOut","recordDeferredEvents","referrerPolicy","str","String","lsTest","test","localStorage","setItem","removeItem","e","isLocalStorageAvailable","configQueue","timer","check","shouldFlushQueue","flush","pause","emit","clearInterval","start","self","setInterval","props","extendEvent","extendEvents","getExtendedEventBody","eventCollection","eventModifier","push","eventsModifier","handleValidationError","message","result","modifierResult","getScreenProfile","keys","output","window","screen","orientation","innerWidth","innerHeight","getWindowProfile","body","html","document","documentElement","offsetHeight","offsetWidth","Math","max","scrollHeight","clientHeight","ratio","availHeight","parseFloat","toFixed","availWidth","getDomNodePath","el","nodeName","stack","parentNode","sibCount","sibIndex","childNodes","sib","hasAttribute","id","unshift","toLowerCase","slice","join","recordEvent","recordEvents","deferEvent","deferEvents","queueCapacity","queueInterval","initAutoTracking","getBrowserProfile","getDatetimeIndex","getDomainName","getDomNodeProfile","getScrollState","getUniqueId","listener","utils","cookie","listenTo","listenerHash","callback","key","split","eventType","selector","MurdockGlobals","undefined","webpackMurdockGlobals","getItem","Murdock","extendLibrary","MurdockTracking","previousDistributionAds","DistributionAds","require","parseParams","serialize","Emitter","Client","configure","debug","log","resources","legacyVersion","enabled","loaded","version","source","previous","isDefined","value","console","noConflict","ready","fn","once","obj","projectId","writeKey","navigator","userAgent","indexOf","location","replace","masterKey","url","name","args","baseUrl","base","path","arg","domReady","readyState","addEventListener","DOMContentLoaded","removeEventListener","testDom","setTimeout","isUndefined","global","urlParams","match","pl","search","decode","decodeURIComponent","query","exec","data","JSON","stringify","encodeURIComponent","setOptOut","listenerCore","ctx","domListeners","addListener","eventHandler","off","apply","survivors","handler","hash","evt","event","srcElement","handlers","matches","deferClickEvent","deferFormSubmit","attachEvent","elem","nodeList","querySelectorAll","anchor","timeout","targetAttr","cbResponse","getAttribute","defaultPrevented","returnValue","preventDefault","metaKey","href","sendBeacon","then","catch","form","submit","eventCollectionOrConfigObject","eventBody","useBeaconApi","configObject","clientConfig","collection","event_collection","extendedEventsHash","isUniqueResult","Promise","resolve","created","DistributionAdops","send","eventsHash","eventList","index","extendedEventBody","blob","Blob","base64","encode","type","getRequestUrl","modified","Date","getTime","getRequestUrlOkLength","getUrlMaxLength","sendFetch","method","mode","redirect","headers","connectionError","reject","response","ok","json","error_code","responseJSON","status","statusText","eventsSavedSuccessfuly","checkEventsSavedSuccessfuly","responseKeys","Object","notSavedEvents","map","filter","success","err","appVersion","img","createElement","onload","naturalHeight","naturalWidth","onerror","width","height","src","m","i1","i2","i3","e1","e2","e3","e4","utf8","charCodeAt","isNaN","charAt","cc","fromCharCode","c1","c2","c3","c","deepExtend","j","clone","input","parse","options","retriesLimit","retryInitialDelay","retryOn","retriesCount","wrappedFetch","fetch","error","uniqueIds","isUnique","customCacheConfig","configCache","stringifiedEvent","hashingMethod","expiryTime","now","item","alreadySentEvent","find","storage","MD5","d","M","V","Y","X","_","f","r","h","t","g","md5_ii","md5_hh","md5_gg","md5_ff","safe_add","md5_cmn","bit_rol","getFromCache","saveToCache","concat","num","Number","clonedQueueConfig","clonedQueueEvents","res","initAutoTrackingCore","lib","ignoreDisabledFormFields","ignoreFormFieldTypes","recordAjaxCalls","recordPerformance","recordErrors","recordPlayVideos","recordDOM","recordPaidVideos","recordAds","recordFacebookAds","checkAdBlock","recordClicks","recordClicksPositionPointer","recordFormSubmits","recordPageViews","recordPageViewsOnExit","recordScrollState","shareUuidAcrossDomains","collectUuid","collectGeo","catchError","allTimeOnSiteS","allTimeOnSiteMS","hidden","visibilityChange","msHidden","webkitHidden","handleVisibilityChange","getSecondsSinceDate","getMiliSecondsSinceDate","domainName","hostname","cookieDomain","domain","uuid","get","set","page_id","geo","geoip_city","city","geoip_region","region","geoip_country_name","country","geoip_latitude","geoip_longitude","is_adblock_active","ad","appendChild","offsetLeft","offsetTop","initialReferrer","referrer","scrollState","addons","browserProfile","tracked_by","pkg","local_time_full","toISOString","user","page","title","description","scroll_state","time_on_page","time_on_page_ms","project","MURDOCK_PROJECT","user_agent","tech","profile","full","initial","time","timestamp","time_zone","Intl","DateTimeFormat","resolvedOptions","timeZone","dist","element","pointer","x_position","pageX","y_position","pageY","record_video_event","video","is_play_recorded","event_data","parseInt","duration","currentTime","send_play_record_event","locateVideoElement","_self","DOM","querySelector","iframes","iframe","contentDocument","observe","_window","gotVideo","isVideoPlaying","paused","ended","forEach","obs","disconnect","contentWindow","mutationList","mutation","addedNodes","node","tag","tagName","toUpperCase","observer","MutationObserver","childList","attributes","subtree","head","innerHTML","adId","creativeId","json_data","substr","ad_data","ad_event","file","line","column","errorObj","error_data","msg","trace","googletag","apiReady","pubads","resp","advertiserId","size","campaignId","companyIds","sourceAgnosticLineItemId","sourceAgnosticCreativeId","lineItemId","isEmpty","labelIds","isBackfill","dfpPath","slot","getSlotId","toString","record_performance","entry","initiatorType","transferSize","PerformanceObserver","list","getEntries","entryTypes","pageNav","performance","getEntriesByType","XMLHttpRequest","_send","startTime","endTime","costTime","cost_time","responseURL","date","round","cookieEnabled","appCodeName","getDocumentDescription","language","appName","onLine","platform","content","getHours","getDay","getDate","getMonth","getFullYear","extractHostname","splitArr","arrLen","action","class","className","getElementProps","event_key","node_name","text","clientLeft","clientTop","state","pixel","pixel_max","ratio_max","getScrollOffset","getWindowHeight","getScrollableArea","pageYOffset","scrollTop","crypto","getRandomValues","Uint8Array","random","v","expires","Cookies","getJSON","expire","daysUntilExpire","remove","count","clear"],"mappings":"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C,EAAiD;AAC/C,2BAAUP,OAAOI,MAAP,CAAcG,MAAxB;AACA,SAAKC,QAAL,GAAgBR,OAAOI,MAAP,CAAcG,MAA9B;AACD;;AAEDP,SAAO1B,KAAP,GAAe,kBAAM0B,OAAOI,MAAP,CAAc9B,KAApB,CAAf;AACA0B,SAAO1B,KAAP,CAAayB,EAAb,CAAgB,OAAhB,EAAyB,YAAU;AACjCC,WAAOS,oBAAP;AACD,GAFD;AAGD,CAnBD;;AAsBAd,oBAAYE,SAAZ,CAAsBa,cAAtB,GAAuC,UAASC,GAAT,EAAa;AAClD,MAAI,CAACxC,UAAUN,MAAf,EAAuB,OAAO,KAAKuC,MAAL,CAAYM,cAAnB;AACvB,OAAKN,MAAL,CAAYM,cAAZ,GAA8BC,MAAMC,OAAOD,GAAP,CAAN,GAAoB,IAAlD;AACA,SAAO,IAAP;AACD,CAJD;;kBAMehB,mB;;;;;;;;;;ACnCA;AACf;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,CAAC;;;ACdsC;;AAEvC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,+BAA+B,WAAc;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEe,+CAAO,EAAC;;;ACnOO;AACS;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qBAAqB,GAAO;AAC5B,CAAC;AACD,0CAA0C,WAAc;AACxD;;;;;;;;ACtBA;AACA;AACA;;AAEA,IAAI,IAA6B;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,YAAY;AACZ;AACA;;AAEA;AACA;A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AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;;AAEA;AACA;AACA,kCAAkC,oBAAoB;AACtD;AACA;;AAEA;AACA;AACA,wCAAwC,4BAA4B;AACpE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD,SAAS;AACT;AACA,SAAS;AACT,8EAA8E;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,uBAAuB;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,uCAAuC,0BAA0B;AACjE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,+BAA+B,0BAA0B,eAAe;AACxE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;AACL;AACA;AACA,CAAC;;;;;;;;;;;;;;;;QC9ceyD,W,GAAAA,W;QAQAC,Y,GAAAA,Y;QAcAC,oB,GAAAA,oB;;AAzBhB;;AACA;;;;;;AAEO,SAASF,WAAT,CAAqBG,eAArB,EAAsCC,aAAtC,EAAoD;;AAEzD,OAAKnC,UAAL,CAAgBE,WAAhB,CAA4BgC,eAA5B,IAA+C,KAAKlC,UAAL,CAAgBE,WAAhB,CAA4BgC,eAA5B,KAAgD,EAA/F;AACA,OAAKlC,UAAL,CAAgBE,WAAhB,CAA4BgC,eAA5B,EAA6CE,IAA7C,CAAkDD,aAAlD;AAC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","file":"node/lib.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n","module.exports = each;\n\nfunction each(o, cb, s){\n  var n;\n  if (!o){\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array){\n    // Indexed arrays, needed for Safari\n    for (n=0; n<o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false){\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o){\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","module.exports = extend;\n\nfunction extend(target){\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n};\n","export const configDefault = {\n\n  queue: {\n    capacity: 5,\n    interval: 5,\n  },\n  api_config:{\n    host         : process.env.API_HOST,\n    basePath     : 'v1/log',\n    protocol     : 'https',\n    requestType  : 'beaconAPI'\n  },\n\n  // connection problems - retry request\n  retry: {\n    limit: 3,\n    initialDelay: 200,\n    retryOnResponseStatuses: [\n      408,\n      500,\n      502,\n      503,\n      504\n    ]\n  },\n\n  unique: false, // record only unique events?\n  // if so - store unique events hashes to compare\n  cache: {\n    /*\n      storage: 'indexeddb', // uncomment for persistence\n    */\n    dbName: 'DistributionAds', // indexedDB name\n    dbCollectionName: 'events',\n    dbCollectionKey: 'hash',\n\n    /*\n      hashingMethod: 'md5', // if undefined - store as stringified JSON\n    */\n    maxAge: 60 * 1000, // store for 1 minute\n  }\n};\n\nexport default configDefault;\n","import MurdockCore from './api-client';\nimport { setOptOut } from './utils/optOut';\nimport { queue } from './utils/queue';\n\nMurdockCore.helpers = MurdockCore.helpers || {};\nMurdockCore.prototype.observers = MurdockCore.observers || {};\n// Install internal queue\nMurdockCore.on('client', function(client){\n  client.extensions = {\n    events: [],\n    collections: {}\n  };\n  \n  if (!client.config.respectDoNotTrack) {\n    this.doNotTrack = false;\n  }\n\n  if (typeof client.config.optOut !== 'undefined') {\n    setOptOut(client.config.optOut);\n    this.optedOut = client.config.optOut;\n  }\n\n  client.queue = queue(client.config.queue);\n  client.queue.on('flush', function(){\n    client.recordDeferredEvents();\n  });\n});\n\n\nMurdockCore.prototype.referrerPolicy = function(str){\n  if (!arguments.length) return this.config.referrerPolicy;\n  this.config.referrerPolicy = (str ? String(str) : null);\n  return this;\n};\n\nexport default MurdockCore;\n","export default function(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  this._state = 0;\n  this._handled = false;\n  this._value = undefined;\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","import Promise from './index';\nimport promiseFinally from './finally';\n\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!globalNS.Promise) {\n  globalNS.Promise = Promise;\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = promiseFinally;\n}\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","function lsTest(){\n  const test = 'test';\n  try {\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n      return true;\n  } catch(e) {\n      return false;\n  }\n}\n\nexport const isLocalStorageAvailable = lsTest();","import Emitter from 'component-emitter';\n\nimport configDefault from '../config-default.js';\n\nexport function queue(configQueue = {}) {\n  if (this instanceof queue === false) {\n    return new queue(configQueue);\n  }\n  this.capacity = 0;\n  this.config = {\n    ...configDefault.queue,\n    ...configQueue\n  };\n  this.events = {\n    // \"collection-1\": [],\n    // \"collection-2\": []\n  };\n  this.interval = 0;\n  this.timer = null;\n  return this;\n}\n\nEmitter(queue.prototype);\n\nqueue.prototype.check = function() {\n  if (shouldFlushQueue(this)) {\n    this.flush();\n  }\n  if (this.config.interval === 0 || this.capacity === 0) {\n    this.pause();\n  }\n  return this;\n};\n\nqueue.prototype.flush = function() {\n  this.emit('flush');\n  this.interval = 0;\n  return this;\n};\n\nqueue.prototype.pause = function() {\n  if (this.timer) {\n    clearInterval(this.timer);\n    this.timer = null;\n  }\n  return this;\n};\n\nqueue.prototype.start = function() {\n  var self = this;\n  self.pause();\n  self.timer = setInterval(function() {\n    self.interval++;\n    self.check();\n  }, 1000);\n  return self;\n};\n\nfunction shouldFlushQueue(props) {\n  if (props.capacity > 0 && props.interval >= props.config.interval) {\n    return true;\n  }\n  else if (props.capacity >= props.config.capacity) {\n    return true;\n  }\n  return false;\n}\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status === undefined ? 200 : options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","import { deepExtend } from './utils/deepExtend';\nimport each from './utils/each';\n\nexport function extendEvent(eventCollection, eventModifier){\n\n  this.extensions.collections[eventCollection] = this.extensions.collections[eventCollection] || [];\n  this.extensions.collections[eventCollection].push(eventModifier);\n  this.emit('extendEvent', eventCollection, eventModifier);\n  return this;\n}\n\nexport function extendEvents(eventsModifier){\n  if (arguments.length !== 1 || ('object' !== typeof eventsModifier && 'function' !== typeof eventsModifier)) {\n    handleValidationError.call(this, 'Incorrect arguments provided to #extendEvents method');\n    return;\n  }\n  this.extensions.events.push(eventsModifier);\n  this.emit('extendEvents', eventsModifier);\n  return this;\n}\n\nfunction handleValidationError(message){\n  this.emit('error', `Event(s) not extended: ${message}`);\n}\n\nexport function getExtendedEventBody(result, queue){\n  if (queue && queue.length > 0) {\n    each(queue, function(eventModifier, i){\n      let modifierResult = (typeof eventModifier === 'function') ? eventModifier() : eventModifier;\n      deepExtend(result, modifierResult);\n    });\n  }\n  return result;\n}\n","export function getScreenProfile(){\n  var keys, output;\n\n  if ('undefined' == typeof window || !window.screen) return {};\n\n  keys = ['height', 'width', 'colorDepth', 'pixelDepth', 'availHeight', 'availWidth'];\n  output = {};\n\n  for (var i = 0; i < keys.length; i++) {\n    output[keys[i]] = window.screen[keys[i]] ? window.screen[keys[i]] : null;\n  }\n\n  output.orientation = {\n    'angle' : window.screen.orientation ? window.screen.orientation['angle'] : 0,\n    'type'  : window.innerWidth > window.innerHeight ? 'landscape': 'portrait'\n  };\n\n  return output;\n}\n","export function getWindowProfile(){\n  var body, html, output;\n\n  if ('undefined' == typeof document) return {};\n\n  body = document.body || {};\n  html = document.documentElement || {};\n\n  output = {\n    'height': ('innerHeight' in window) ? window.innerHeight : document.documentElement.offsetHeight,\n    'width': ('innerWidth' in window) ? window.innerWidth : document.documentElement.offsetWidth,\n    'scrollHeight': Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight ) || null\n  };\n\n  if (window.screen) {\n    output.ratio = {\n      'height': (window.screen.availHeight) ? parseFloat( (window.innerHeight/window.screen.availHeight).toFixed(2) ) : null,\n      'width': (window.screen.availWidth) ? parseFloat( (window.innerWidth/window.screen.availWidth).toFixed(2) ) : null\n    };\n  }\n\n  return output;\n}\n\n/*\n  Notes:\n    document.documentElement.offsetHeight/Width is a workaround for IE8 and below, where window.innerHeight/Width is undefined\n*/\n","export function getDomNodePath(el){\n  if (!el.nodeName) return '';\n\n  var stack = [];\n  while ( el.parentNode != null ) {\n    // console.log(el.nodeName);\n    var sibCount = 0;\n    var sibIndex = 0;\n    for ( var i = 0; i < el.parentNode.childNodes.length; i++ ) {\n      var sib = el.parentNode.childNodes[i];\n      if ( sib.nodeName == el.nodeName ) {\n        if ( sib === el ) {\n          sibIndex = sibCount;\n        }\n        sibCount++;\n      }\n    }\n    if ( el.hasAttribute('id') && el.id != '' ) {\n      stack.unshift(el.nodeName.toLowerCase() + '#' + el.id);\n    } else if ( sibCount > 1 ) {\n      stack.unshift(el.nodeName.toLowerCase() + ':eq(' + sibIndex + ')');\n    } else {\n      stack.unshift(el.nodeName.toLowerCase());\n    }\n    el = el.parentNode;\n  }\n\n  return stack.slice(1).join(' > ');\n}\n\n\n// via: http://stackoverflow.com/a/16742828/2511985\n","import MurdockCore from './index';\nimport each from './utils/each';\nimport extend from './utils/extend';\nimport { listenerCore } from './utils/listener';\nimport {\n  recordEvent,\n  recordEvents\n} from './record-events-browser';\n\nimport {\n  deferEvent,\n  deferEvents,\n  queueCapacity,\n  queueInterval,\n  recordDeferredEvents\n} from './defer-events';\n\nimport { extendEvent, extendEvents } from './extend-events';\nimport { initAutoTrackingCore } from './browser-auto-tracking';\nimport { getBrowserProfile } from './helpers/getBrowserProfile';\nimport { getDatetimeIndex } from './helpers/getDatetimeIndex';\nimport { getDomainName } from './helpers/getDomainName';\nimport { getDomNodePath } from './helpers/getDomNodePath';\nimport { getDomNodeProfile } from './helpers/getDomNodeProfile';\nimport { getScreenProfile } from './helpers/getScreenProfile';\nimport { getScrollState } from './helpers/getScrollState';\nimport { getUniqueId } from './helpers/getUniqueId';\nimport { getWindowProfile } from './helpers/getWindowProfile';\nimport { cookie } from './utils/cookie';\nimport { timer } from './utils/timer';\nimport { isLocalStorageAvailable } from './utils/localStorage';\n\n// ------------------------\n// Methods\n// ------------------------\nextend(MurdockCore.prototype, {\n  recordEvent,\n  recordEvents\n});\n\nextend(MurdockCore.prototype, {\n  deferEvent,\n  deferEvents,\n  queueCapacity,\n  queueInterval,\n  recordDeferredEvents\n});\nextend(MurdockCore.prototype, {\n  extendEvent,\n  extendEvents\n});\n// ------------------------\n// Auto-Tracking\n// ------------------------\nconst initAutoTracking = initAutoTrackingCore(MurdockCore);\nextend(MurdockCore.prototype, {\n  initAutoTracking\n});\n\n// ------------------------\n// Helpers\n// ------------------------\nextend(MurdockCore.helpers, {\n  getBrowserProfile,\n  getDatetimeIndex,\n  getDomainName,\n  getDomNodePath,\n  getDomNodeProfile,\n  getScreenProfile,\n  getScrollState,\n  getUniqueId,\n  getWindowProfile\n});\n\n// ------------------------\n// Utils\n// ------------------------\nconst listener = listenerCore(MurdockCore);\nextend(MurdockCore.utils, {\n  cookie,\n  listener,\n  timer\n});\n\nMurdockCore.listenTo = (listenerHash) => {\n  each(listenerHash, (callback, key) => {\n    let split = key.split(' ');\n    let eventType = split[0],\n    selector = split.slice(1, split.length).join(' ');\n    // Create an unassigned listener\n    return listener(selector).on(eventType, callback);\n  });\n};\n\nexport let MurdockGlobals = undefined;\nif (typeof webpackMurdockGlobals !== 'undefined') {\n  MurdockGlobals = webpackMurdockGlobals;\n}\n\nif (isLocalStorageAvailable && localStorage.getItem('optout')) {\n  MurdockCore.optedOut = true;\n}\n\nif (getBrowserProfile().doNotTrack === '1'\n  || getBrowserProfile().doNotTrack === 'yes') {\n  MurdockCore.doNotTrack = true;\n}\n\nexport const Murdock = MurdockCore.extendLibrary(MurdockCore); // deprecated, left for backward compatibility\nexport const MurdockTracking = Murdock;\nexport default Murdock;\n","import configDefault from './config-default.js';\n\n(function(env){\n  var previousDistributionAds = env.DistributionAds || undefined;\n  var each = require('./utils/each'),\n      extend = require('./utils/extend'),\n      parseParams = require('./utils/parse-params'),\n      serialize = require('./utils/serialize');\n\n  var Emitter = require('component-emitter');\n\n  function Client(props){\n    if (this instanceof Client === false) {\n      return new Client(props);\n    }\n    this.configure(props);\n\n    // Set up event handling\n    if (Client.debug) {\n      this.on('error', Client.log);\n    }\n    this.emit('ready');\n    Client.emit('client', this);\n  }\n\n  if (previousDistributionAds && typeof previousDistributionAds.resources === 'undefined') {\n    Client.legacyVersion = previousDistributionAds;\n  }\n\n  Emitter(Client);\n  Emitter(Client.prototype);\n\n  extend(Client, {\n    debug: false,\n    enabled: true,\n    loaded: false,\n    version: '__VERSION__'\n  });\n\n  // Set or extend helpers\n  Client.helpers = Client.helpers || {};\n\n  // Set or extend resources\n  Client.resources = Client.resources || {};\n  extend(Client.resources, {\n    'base'      : '{protocol}://{host}/{basePath}',\n    'events'  : '{protocol}://{host}/{basePath}/events',\n\n  });\n\n  // Set or extend utils\n  Client.utils = Client.utils || {};\n  extend(Client.utils, {\n    'each'        : each,\n    'extend'      : extend,\n    'parseParams' : parseParams,\n    'serialize'   : serialize\n  });\n\n  Client.extendLibrary = function(target, source) {\n    var previous = previousDistributionAds || source;\n    if (isDefined(previous) && isDefined(previous.resources)) {\n      each(previous, function(value, key) {\n        if (typeof value === 'object') {\n          target[key] = target[key] || {};\n          extend(target[key], value);\n        }\n        else {\n          target[key] = target[key] || value;\n        }\n      });\n      extend(target.prototype, previous.prototype);\n    }\n    return target;\n  };\n\n  Client.log = function(str){\n    if (Client.debug && typeof console === 'object') {\n      console.log('[DistributionAds]', str);\n    }\n  };\n\n  Client.noConflict = function(){\n    if (typeof env.DistributionAds !== 'undefined') {\n      env.DistributionAds = Client.legacyVersion || previousDistributionAds;\n    }\n    return Client;\n  };\n\n  Client.ready = function(fn){\n    if (Client.loaded) {\n      fn();\n    }\n    else {\n      Client.once('ready', fn);\n    }\n  };\n\n  Client.prototype.configure = function(obj){\n    var config = obj || {};\n    this.config = this.config || {\n      projectId    : undefined,\n      writeKey     : undefined,\n      host         : undefined,\n      protocol     : 'https',\n      requestType  : 'jsonp',\n      resources    : extend({}, Client.resources)\n    };\n\n    // IE<10 request shim\n    if (typeof window !== 'undefined' && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1) {\n      this.config.protocol = document.location.protocol.replace(':', '');\n    }\n\n    if (config.host) {\n      config.host=config.host.replace(/(^\\w+:|^)\\/\\//, '').replace(/.*?:\\/\\//g, '');\n\n    }\n\n    extend(this.config, config);\n    return this;\n  };\n\n  Client.prototype.masterKey = function(str){\n    if (!arguments.length) return this.config.masterKey;\n    this.config.masterKey = str ? String(str) : null;\n    return this;\n  };\n\n  Client.prototype.resources = function(obj){\n    if (!arguments.length) return this.config.resources;\n    var self = this;\n    if (typeof obj === 'object') {\n      each(obj, function(value, key){\n        self.config.resources[key] = (value ? value : null);\n      });\n    }\n    return self;\n  };\n\n  Client.prototype.url = function(name){\n    var args = Array.prototype.slice.call(arguments, 1),\n        baseUrl = this.config.base || '{protocol}://{host}/',\n        path;\n    if (name && typeof name === 'string') {\n      if (this.config.resources[name]) {\n        path = this.config.resources[name];\n      }\n      else {\n        path = baseUrl + \"/\" +name;\n      }\n    }\n    else {\n      path = baseUrl;\n    }\n    each(this.config, function(value, key){\n      if (typeof value !== 'object') {\n        path = path.replace('{' + key + '}', value);\n      }\n    });\n\n    each(args, function(arg, i){\n      if (typeof arg === 'string' && arg!==\"undefined\") {\n        path += '/' + arg;\n      }\n      else if (typeof arg === 'object') {\n        path += '?';\n        each(arg, function(value, key){\n          path += key + '=' + value + '&';\n        });\n        path = path.slice(0, -1);\n      }\n    });\n\n    return path;\n  };\n\n  domReady(function(){\n    Client.loaded = true;\n    Client.emit('ready');\n  });\n\n  function domReady(fn){\n    if (Client.loaded || typeof document === 'undefined') {\n      fn();\n      return;\n    }\n    // Firefox 3.5 shim\n    if(document.readyState == null && document.addEventListener){\n      document.addEventListener('DOMContentLoaded', function DOMContentLoaded(){\n        document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n        document.readyState = 'complete';\n      }, false);\n      document.readyState = 'loading';\n    }\n    testDom(fn);\n  }\n\n  function testDom(fn){\n    if (/in/.test(document.readyState)) {\n      setTimeout(function(){\n        testDom(fn);\n      }, 9);\n    }\n    else {\n      fn();\n    }\n  }\n\n  function isDefined(target) {\n    return typeof target !== 'undefined';\n  }\n\n  function isUndefined(target) {\n    return typeof target === 'undefined';\n  }\n\n  module.exports = Client;\n\n}).call(this, typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {});\n","module.exports = parseParams;\n\nfunction parseParams(str){\n  // via: http://stackoverflow.com/a/2880929/2511985\n  var urlParams = {},\n      match,\n      pl     = /\\+/g,  // Regex for replacing addition symbol with a space\n      search = /([^&=]+)=?([^&]*)/g,\n      decode = function (s) { return decodeURIComponent(s.replace(pl, \" \")); },\n      query  = str.split(\"?\")[1];\n\n  while (!!(match=search.exec(query))) {\n    urlParams[decode(match[1])] = decode(match[2]);\n  }\n  return urlParams;\n};\n","var each = require('./each'),\n    extend = require('./extend');\n\nmodule.exports = serialize;\n\nfunction serialize(data){\n  var query = [];\n  each(data, function(value, key){\n    if ('string' !== typeof value) {\n      value = JSON.stringify(value);\n    }\n    query.push(key + '=' + encodeURIComponent(value));\n  });\n  return query.join('&');\n}\n","import { isLocalStorageAvailable } from './localStorage';\n\nexport function setOptOut(optOut = true) {\n    if (!isLocalStorageAvailable) return;\n\n    if (optOut) {\n        localStorage.setItem('optout', optOut);\n        return;\n    }\n\n    localStorage.removeItem('optout');\n};\n","import each from '../utils/each';\n\n\nexport const listenerCore = function(ctx){\n\n  // Make sure this object exists\n  ctx.domListeners = ctx.domListeners || {\n    /*\n    'click': {\n      '.nav li > a': [fn, fn, fn]\n    }\n    */\n  };\n\n  function listener(str){\n    if (!str) return;\n    if (this instanceof listener === false) {\n      return new listener(str);\n    }\n    this.selector = str;\n    return this;\n  }\n\n  listener.prototype.on = function(str, fn){\n    var self = this;\n\n    if (arguments.length !== 2 || 'string' !== typeof str || 'function' !== typeof fn) return this;\n\n    // Set each listener on a parent dictionary, indexed by event:\n    if ('undefined' === typeof ctx.domListeners[str]) {\n      addListener(str, eventHandler(str));\n      ctx.domListeners[str] = {};\n    }\n    ctx.domListeners[str][self.selector] = ctx.domListeners[str][self.selector] || [];\n    ctx.domListeners[str][self.selector].push(fn);\n    return self;\n  };\n\n  listener.prototype.once = function(str, fn){\n    var self = this;\n    function on() {\n      self.off(str, on);\n      return fn.apply(self, arguments);\n    }\n    on.fn = fn;\n    self.on(str, on);\n    return self;\n  };\n\n  listener.prototype.off = function(str, fn){\n    var self = this, survivors = [];\n    if (arguments.length === 2) {\n      each(ctx.domListeners[str][self.selector], function(handler, i){\n        if (handler === fn || handler.fn === fn) return;\n        survivors.push(handler);\n      });\n      ctx.domListeners[str][self.selector] = survivors;\n    }\n    else if (arguments.length === 1) {\n      try {\n        delete ctx.domListeners[str][self.selector];\n      }\n      catch(e){\n        ctx.domListeners[str][self.selector] = [];\n      }\n    }\n    else {\n      // loop over every eventType and delete handlers\n      each(ctx.domListeners, function(hash, eventType){\n        // if ('undefined' === typeof hash[str]) return;\n        try {\n          delete ctx.domListeners[eventType][self.selector];\n        }\n        catch(e){\n          ctx.domListeners[eventType][self.selector] = function(){};\n        }\n      });\n    }\n    return self;\n  };\n\n  function eventHandler(eventType){\n    return function(e){\n      var evt, target;\n\n      evt = e || window.event;\n      target = evt.target || evt.srcElement;\n\n      // If nothing assigned to this event type, let it go\n      if ('undefined' === ctx.domListeners[eventType]) return;\n\n      each(ctx.domListeners[eventType], function(handlers, key){\n\n        if (matches(target, key)) {\n          // Call all handlers for this eventType + node\n          each(handlers, function(fn, i){\n            if ('click' === eventType && 'A' === target.nodeName) {\n              deferClickEvent(evt, target, fn);\n            }\n            else if ('submit' === eventType && 'FORM' === target.nodeName) {\n              deferFormSubmit(evt, target, fn);\n            }\n            else {\n              fn(evt);\n            }\n          });\n        }\n        else if ('window' === key) {\n          // Call all handlers\n          each(handlers, function(fn, i){\n            fn(evt);\n          });\n        }\n        return;\n      });\n    };\n  }\n\n  return listener;\n}\n\n\n// ------------------------------\n// Attach global event listener\n// ------------------------------\n\nfunction addListener(eventType, fn){\n  if (document.addEventListener) {\n    document.addEventListener(eventType, fn, false);\n  } else {\n    document.attachEvent(\"on\" + eventType, fn);\n  }\n}\n\n\n// ------------------------------\n// Match DOM element to selector\n// ------------------------------\n\nfunction matches(elem, selector) {\n  // We'll use querySelectorAll to find all element matching the selector,\n  // then check if the given element is included in that list.\n  // Executing the query on the parentNode reduces the resulting nodeList,\n  // document doesn't have a parentNode, though.\n  var nodeList = ( elem.parentNode || document ).querySelectorAll( selector ) || [],\n      i = nodeList.length;\n\n  // loop on the nodeList\n  while ( i-- ) {\n    if ( nodeList[i] == elem ) { return true; }\n  }\n  return false;\n}\n\n\n// ------------------------------\n// Handle 'click' events (A)\n// ------------------------------\n\nfunction deferClickEvent(evt, anchor, callback){\n  var timeout = 500,\n      targetAttr,\n      cbResponse;\n\n  // Get 'target' attribute from anchor\n  if (anchor.getAttribute !== void 0) {\n    targetAttr = anchor.getAttribute(\"target\");\n  } else if (anchor.target) {\n    targetAttr = anchor.target;\n  }\n\n  // Fire listener and catch possible response (return false)\n  cbResponse = callback(evt);\n\n  // If prevented within callback, bail:\n  if (('boolean' === typeof cbResponse && cbResponse === false) || evt.defaultPrevented || evt.returnValue === false) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n    evt.returnValue = false;\n    return false;\n  }\n  // Else if anchor doesn't kick off a new window or tab.. defer and replay the event:\n  else if (targetAttr !== '_blank' && targetAttr !== 'blank' && !evt.metaKey && !anchor.hasAttribute('download')) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n    evt.returnValue = false;\n    if (\n      anchor.href\n      && anchor.href !== '#'\n      && anchor.href !== (window.location + '#')\n    ) {\n      if (typeof cbResponse !== 'undefined') {\n        if (navigator && navigator.sendBeacon) {\n          window.location = anchor.href;\n          return;\n        }\n        // promise\n        cbResponse.then(() => {\n          window.location = anchor.href;\n        }).catch(err => {\n          // change location anyway - to not let user hanging\n          window.location = anchor.href;\n        });\n      } else {\n        setTimeout(function(){\n          window.location = anchor.href;\n        }, timeout);\n      }\n    }\n  }\n\n  return false;\n}\n\n\n// ------------------------------\n// Handle 'submit' events (FORM)\n// ------------------------------\n\nfunction deferFormSubmit(evt, form, callback){\n  var timeout = 500;\n  // Fire listener and catch possible response (return false)\n  var cbResponse = callback(evt);\n\n  // If prevented within callback, bail\n  if (('boolean' === typeof cbResponse && cbResponse === false) || evt.defaultPrevented || evt.returnValue === false) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n    evt.returnValue = false;\n    return false;\n  }\n  // Defer and replay event\n  else {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n    evt.returnValue = false;\n    if (typeof cbResponse !== 'undefined') {\n      if (navigator && navigator.sendBeacon) {\n        form.submit();\n        return;\n      }\n      // promise\n      cbResponse.then(() => {\n        form.submit();\n      }).catch(err => {\n        // submit form anyway - to not let user hanging\n        form.submit();\n      });\n    } else {\n      setTimeout(function(){\n        form.submit();\n      }, timeout);\n    }\n  }\n\n  return false;\n}\n","import 'promise-polyfill/src/polyfill';\nimport 'whatwg-fetch';\n\nimport base64 from './utils/base64';\nimport each from './utils/each';\nimport extend from './utils/extend';\n\nimport DistributionAdops from './index';\n\nimport { getExtendedEventBody } from './extend-events';\nimport fetchRetry from './utils/fetchRetry';\nimport isUnique from './utils/unique';\n\n// ------------------------------\n// .recordEvent\n// ------------------------------\n\nexport function recordEvent(eventCollectionOrConfigObject, eventBody, callback){\n  let eventCollection = eventCollectionOrConfigObject;\n  let useBeaconApi = false;\n  let unique;\n  let configObject;\n  let clientConfig = this.config;\n\n  if (typeof eventCollectionOrConfigObject === 'object'\n    && eventCollectionOrConfigObject) {\n    // slowly but surely we migrate to one object with all args\n    configObject = eventCollectionOrConfigObject;\n    eventCollection = eventCollectionOrConfigObject.collection\n      || eventCollectionOrConfigObject.event_collection;\n    eventBody = eventCollectionOrConfigObject.event;\n    callback = eventCollectionOrConfigObject.callback;\n    unique = eventCollectionOrConfigObject.unique;\n  }\n\n\n  const url = this.url('events', encodeURIComponent(eventCollection));\n  let data = {event:eventCollectionOrConfigObject.collection};\n\n\n  if (!eventCollection || typeof eventCollection !== 'string') {\n    handleValidationError.call(this, 'Collection name must be a string.', callback);\n    return;\n  }\n\n  extend(data, eventBody);\n\n  // ------------------------------\n  // Run extendEvent(s) transforms\n  // ------------------------------\n  const extendedEventsHash = {};\n  getExtendedEventBody(extendedEventsHash, this.extensions.events);\n  getExtendedEventBody(extendedEventsHash, this.extensions.collections[eventCollection]);\n  getExtendedEventBody(extendedEventsHash, [data]);\n\n  if (unique) {\n    return isUnique(configObject, extendedEventsHash).then(isUniqueResult => {\n      if (!isUniqueResult) {\n        return Promise.resolve({\n          created: false,\n          message: '[NOT_UNIQUE] This event has already been recorded'\n        });\n      }\n      return recordEvent.call(this, { ...eventCollectionOrConfigObject, unique: undefined });\n    });\n  }\n\n  this.emit('recordEvent', eventCollection, extendedEventsHash);\n\n  if (!DistributionAdops.enabled) {\n    handleValidationError.call(this, 'DistributionAdops.enabled is set to false.', callback);\n    return false;\n  }\n\n  if (DistributionAdops.optedOut) {\n    return Promise.resolve({\n      created: false,\n      message: 'DistributionAdops.optedOut is set to true.'\n    })\n  }\n\n  if (DistributionAdops.doNotTrack) {\n    return Promise.resolve({\n      created: false,\n      message: 'DistributionAdops.doNotTrack is set to true.'\n    })\n  }\n\n  return send.call(this, { url, extendedEventsHash, callback, configObject, eventCollection });\n}\n\n// ------------------------------\n// .recordEvents\n// ------------------------------\n\nexport function recordEvents(eventsHash, callback){\n  const self = this;\n  const url = this.url('events');\n\n\n  if ('object' !== typeof eventsHash || eventsHash instanceof Array) {\n    handleValidationError.call(this, 'First argument must be an object', callback );\n    return;\n  }\n\n  if (arguments.length > 2) {\n    handleValidationError.call(this, 'Incorrect arguments provided to #recordEvents method', callback);\n    return;\n  }\n\n  // ------------------------------\n  // Run extendEvent(s) transforms\n  // ------------------------------\n  const extendedEventsHash = {};\n  each(eventsHash, function(eventList, eventCollection){\n    // Find or create collection on new hash\n    extendedEventsHash[eventCollection] = extendedEventsHash[eventCollection] || [];\n    // Loop over each eventBody in the existing hash\n    each(eventList, function(eventBody, index){\n      // Create a new data object\n      let extendedEventBody = {};\n      // Process \"events\" transform pipeline\n      getExtendedEventBody(extendedEventBody, self.extensions.events);\n      // Process \"collection\" transform pipeline\n      getExtendedEventBody(extendedEventBody, self.extensions.collections[eventCollection]);\n      // Blend existing eventBody data into the result\n      getExtendedEventBody(extendedEventBody, [eventBody]);\n      // Push extendedEventBody into new hash\n      extendedEventsHash[eventCollection].push(extendedEventBody);\n    });\n  });\n\n  this.emit('recordEvents', extendedEventsHash);\n\n  if (!DistributionAdops.enabled) {\n    handleValidationError.call(this, 'DistributionAdops.enabled is set to false.', callback);\n    return false;\n  }\n\n  if (DistributionAdops.optedOut) {\n    return Promise.resolve({\n      created: false,\n      message: 'DistributionAdops.optedOut is set to true.'\n    })\n  }\n\n\n\n  return send.call(this, { url, extendedEventsHash, callback });\n}\n\nfunction send({ url, extendedEventsHash, callback, configObject = {}, eventCollection}){\n  const clientConfig = this.config;\n  const requestType = configObject.requestType // specific method for one request\n    || this.config.requestType; // global request type of client\n\n  if (\n    navigator && navigator.sendBeacon &&\n    requestType === 'beaconAPI'\n      // so you can send specific recordEvent() using beaconAPI\n      // even if your global client's config prefers Fetch\n  ) {\n    var blob= new Blob([JSON.stringify({data:base64.encode(JSON.stringify(extendedEventsHash))})], {type : 'application/json; charset=UTF-8'}); // the blob\n    navigator.sendBeacon(\n      `${url}?`,\n      blob\n    );\n    if (callback) {\n      // Beacon API is not handling responses nor errors\n      callback();\n    }\n    return this;\n  }\n\n  // this is IMAGE beacon, not the Beacon API. deprecated\n    const getRequestUrl = this.url('events', encodeURIComponent(eventCollection), {\n      data     : encodeURIComponent( base64.encode( JSON.stringify(extendedEventsHash) ) ),\n      modified : new Date().getTime()\n    });\n    const getRequestUrlOkLength = getRequestUrl.length < getUrlMaxLength();\n\n    if (getRequestUrlOkLength) {\n      sendBeacon.call(this, getRequestUrl, callback);\n    }\n    else {\n      if (callback) {\n        callback('Beacon URL length exceeds current browser limit, and XHR is not supported.', null);\n      }\n    }\n\n\n  return this;\n}\n\nfunction sendFetch(method, url, data, callback = undefined){\n  const self = this;\n\n  return fetchRetry(url, {\n      method,\n      body: data ? JSON.stringify(data) : '',\n      mode: 'cors',\n      redirect: 'follow',\n      referrerPolicy: self.referrerPolicy() || 'unsafe-url',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      // keepalive: true, not supported for CORS yet\n      retry: self.config.retry\n    })\n    .catch(connectionError => {\n      if (typeof callback !== 'undefined') {\n        callback.call(self, connectionError, null);\n      }\n      self.emit('error', connectionError);\n      return Promise.reject(connectionError);\n    })\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return response.json().then(responseJSON => {\n        return Promise.reject({\n          error_code: responseJSON.error_code,\n          body: responseJSON.message,\n          status: response.status,\n          ok: false,\n          statusText: response.statusText\n        });\n      });\n    }).then(responseJSON => {\n      const eventsSavedSuccessfuly = checkEventsSavedSuccessfuly(responseJSON);\n      if (eventsSavedSuccessfuly) {\n        if (typeof callback !== 'undefined') {\n          callback.call(self, null, responseJSON);\n        }\n        return Promise.resolve(responseJSON);\n      } else {\n        if (typeof callback !== 'undefined') {\n          callback.call(self, responseJSON, null);\n        }\n        self.emit('error', responseJSON);\n        return Promise.reject(responseJSON);\n      }\n    });\n}\n\nfunction checkEventsSavedSuccessfuly(response){\n  // single event\n  if (typeof response.created !== 'undefined') {\n    if (response.created) {\n      return true;\n    }\n    return false;\n  }\n  // multiple events\n  const responseKeys = Object.keys(response);\n  const notSavedEvents = responseKeys\n    .map(collection => {\n      return response[collection].filter(event => !event.success);\n    })\n    .filter(collection => collection.length > 0);\n\n  if (notSavedEvents.length === 0) {\n    return true;\n  }\n\n  return false;\n}\n\n\n\nfunction handleValidationError(message, callback){\n  const err = `Event(s) not recorded: ${message}`;\n  this.emit('error', err);\n  if (callback) {\n    callback.call(this, err, null);\n  }\n}\n\nfunction getUrlMaxLength(){\n  if ('undefined' !== typeof window && navigator) {\n    if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {\n      return 1900;\n    }\n  }\n  return 16000;\n}\n\n/*\n  DEPRECATED METHODS\n*/\n\n// Image Beacon Requests\n// DEPRECATED\nfunction sendBeacon(url, callback){\n  var self = this,\n      img = document.createElement('img'),\n      loaded = false;\n\n  img.onload = function() {\n    loaded = true;\n    if ('naturalHeight' in this) {\n      if (this.naturalHeight + this.naturalWidth === 0) {\n        this.onerror();\n        return;\n      }\n    } else if (this.width + this.height === 0) {\n      this.onerror();\n      return;\n    }\n    if (callback) {\n      callback.call(self);\n    }\n  };\n  img.onerror = function() {\n    loaded = true;\n    if (callback) {\n      callback.call(self, 'An error occurred!', null);\n    }\n  };\n  img.src = url + '&c=clv1';\n}\n","module.exports = {\n  map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n  encode: function (n) {\n    \"use strict\";\n    var o = \"\", i = 0, m = this.map, i1, i2, i3, e1, e2, e3, e4;\n    n = this.utf8.encode(n);\n    while (i < n.length) {\n      i1 = n.charCodeAt(i++); i2 = n.charCodeAt(i++); i3 = n.charCodeAt(i++);\n      e1 = (i1 >> 2); e2 = (((i1 & 3) << 4) | (i2 >> 4)); e3 = (isNaN(i2) ? 64 : ((i2 & 15) << 2) | (i3 >> 6));\n      e4 = (isNaN(i2) || isNaN(i3)) ? 64 : i3 & 63;\n      o = o + m.charAt(e1) + m.charAt(e2) + m.charAt(e3) + m.charAt(e4);\n    } return o;\n  },\n  decode: function (n) {\n    \"use strict\";\n    var o = \"\", i = 0, m = this.map, cc = String.fromCharCode, e1, e2, e3, e4, c1, c2, c3;\n    n = n.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n    while (i < n.length) {\n      e1 = m.indexOf(n.charAt(i++)); e2 = m.indexOf(n.charAt(i++));\n      e3 = m.indexOf(n.charAt(i++)); e4 = m.indexOf(n.charAt(i++));\n      c1 = (e1 << 2) | (e2 >> 4); c2 = ((e2 & 15) << 4) | (e3 >> 2);\n      c3 = ((e3 & 3) << 6) | e4;\n      o = o + (cc(c1) + ((e3 != 64) ? cc(c2) : \"\")) + (((e4 != 64) ? cc(c3) : \"\"));\n    } return this.utf8.decode(o);\n  },\n  utf8: {\n    encode: function (n) {\n      \"use strict\";\n      var o = \"\", i = 0, cc = String.fromCharCode, c;\n      while (i < n.length) {\n        c = n.charCodeAt(i++); o = o + ((c < 128) ? cc(c) : ((c > 127) && (c < 2048)) ?\n        (cc((c >> 6) | 192) + cc((c & 63) | 128)) : (cc((c >> 12) | 224) + cc(((c >> 6) & 63) | 128) + cc((c & 63) | 128)));\n        } return o;\n    },\n    decode: function (n) {\n      \"use strict\";\n      var o = \"\", i = 0, cc = String.fromCharCode, c2, c;\n      while (i < n.length) {\n        c = n.charCodeAt(i);\n        o = o + ((c < 128) ? [cc(c), i++][0] : ((c > 191) && (c < 224)) ?\n        [cc(((c & 31) << 6) | ((c2 = n.charCodeAt(i + 1)) & 63)), (i += 2)][0] :\n        [cc(((c & 15) << 12) | (((c2 = n.charCodeAt(i + 1)) & 63) << 6) | ((c3 = n.charCodeAt(i + 2)) & 63)), (i += 3)][0]);\n      } return o;\n    }\n  }\n};\n","export const deepExtend = function(target){\n  for (var i = 1; i < arguments.length; i++) {\n    // Copy unique items from incoming array\n    if (target instanceof Array && arguments[i] instanceof Array) {\n      for (var j = 0; j < arguments[i].length; j++) {\n        if (target.indexOf(arguments[i][j]) < 0) {\n          target.push(arguments[i][j]);\n        }\n      }\n    }\n    // Blend objects\n    else {\n      for (var prop in arguments[i]){\n        // Recurse when both contain objects of same name\n        // and incoming is not a null object\n        if (typeof target[prop] !== 'undefined'\n          && typeof target[prop] === 'object'\n          && typeof arguments[i][prop] === 'object'\n          && arguments[i][prop] !== null) {\n            deepExtend(target[prop], clone(arguments[i][prop]));\n        }\n        // Otherwise just copy it over...\n        else if (\n          arguments[i][prop] !== undefined &&\n          typeof arguments[i][prop] !== 'function') {\n            target[prop] = clone(arguments[i][prop]);\n        }\n      }\n    }\n  }\n  return target;\n}\n\nfunction clone(input){\n  return JSON.parse( JSON.stringify(input) );\n}\n","import 'promise-polyfill/src/polyfill';\nimport 'whatwg-fetch';\n\nimport configDefault from '../config-default.js';\n\nexport default function(url, options) {\n  const config = {\n    ...configDefault,\n    ...(options.retry || {})\n  };\n\n  const retriesLimit = config.retry.limit;\n  const retryInitialDelay = config.retry.initialDelay;\n  const retryOn = config.retry.retryOnResponseStatuses;\n  let retriesCount = 0;\n\n  if (retryOn && !(retryOn instanceof Array)) {\n    throw {\n      name: 'ArgumentError',\n      message: 'retryOn property expects an array'\n    }\n  }\n\n  return new Promise(function(resolve, reject) {\n    const wrappedFetch = function(n) {\n      fetch(url, options)\n        .then(function(response) {\n          if (retryOn.indexOf(response.status) === -1) {\n            resolve(response);\n          } else {\n            if (n > 0) {\n              retry();\n            } else {\n              reject(response);\n            }\n          }\n        })\n        .catch(function(error) {\n          if (n > 0) {\n            retry();\n          } else {\n            reject(error);\n          }\n        });\n    };\n\n    function retry() {\n      retriesCount = retriesCount + 1;\n      setTimeout(function() {\n          wrappedFetch(retriesLimit - retriesCount);\n        }, 2^retriesCount * retryInitialDelay);\n    }\n\n    wrappedFetch(retriesLimit - retriesCount);\n  });\n};\n","import 'promise-polyfill/src/polyfill';\n\nimport md5 from './md5';\nimport { getFromCache, saveToCache } from './cache-browser';\n\nimport configDefault from '../config-default.js';\n\nlet uniqueIds = [];\n\nexport const isUnique = (customCacheConfig, extendedEventBody) => {\n  const configCache = { ...configDefault.cache, ...customCacheConfig.cache };\n  const stringifiedEvent = JSON.stringify(extendedEventBody);\n  const { hashingMethod } = configCache;\n  const hash = hashingMethod && hashingMethod.toLowerCase() === 'md5'\n    ? md5(stringifiedEvent) : stringifiedEvent;\n  const expiryTime = configCache.maxAge ? (Date.now() + configCache.maxAge) : undefined;\n  const item = {\n    hash,\n    expiryTime\n  };\n  if (expiryTime){\n    const now = Date.now();\n    uniqueIds = uniqueIds.filter(item => item.expiryTime > now);\n  }\n\n  const alreadySentEvent = uniqueIds.find(item => item.hash === hash);\n  if (alreadySentEvent) {\n    if (alreadySentEvent.expiryTime && alreadySentEvent.expiryTime < Date.now()) {\n      uniqueIds = uniqueIds.filter(item => item.hash !== hash);\n    } else {\n      return Promise.resolve(false);\n    }\n  }\n  uniqueIds.push(item);\n  if (configCache.storage && configCache.storage.toLowerCase() === 'indexeddb') {\n    return getFromCache(hash, configCache).then(alreadySentEvent => {\n      if (alreadySentEvent) {\n        return false;\n      }\n      saveToCache(hash, configCache);\n      return true;\n    });\n  }\n\n  return Promise.resolve(true);\n};\n\nexport default isUnique;\n","export const MD5 = function(d){const result = M(V(Y(X(d),8*d.length)));return result.toLowerCase()};function M(d){for(var _,m=\"0123456789ABCDEF\",f=\"\",r=0;r<d.length;r++)_=d.charCodeAt(r),f+=m.charAt(_>>>4&15)+m.charAt(15&_);return f}function X(d){for(var _=Array(d.length>>2),m=0;m<_.length;m++)_[m]=0;for(m=0;m<8*d.length;m+=8)_[m>>5]|=(255&d.charCodeAt(m/8))<<m%32;return _}function V(d){for(var _=\"\",m=0;m<32*d.length;m+=8)_+=String.fromCharCode(d[m>>5]>>>m%32&255);return _}function Y(d,_){d[_>>5]|=128<<_%32,d[14+(_+64>>>9<<4)]=_;for(var m=1732584193,f=-271733879,r=-1732584194,i=271733878,n=0;n<d.length;n+=16){var h=m,t=f,g=r,e=i;f=md5_ii(f=md5_ii(f=md5_ii(f=md5_ii(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_hh(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_gg(f=md5_ff(f=md5_ff(f=md5_ff(f=md5_ff(f,r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+0],7,-680876936),f,r,d[n+1],12,-389564586),m,f,d[n+2],17,606105819),i,m,d[n+3],22,-1044525330),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+4],7,-176418897),f,r,d[n+5],12,1200080426),m,f,d[n+6],17,-1473231341),i,m,d[n+7],22,-45705983),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+8],7,1770035416),f,r,d[n+9],12,-1958414417),m,f,d[n+10],17,-42063),i,m,d[n+11],22,-1990404162),r=md5_ff(r,i=md5_ff(i,m=md5_ff(m,f,r,i,d[n+12],7,1804603682),f,r,d[n+13],12,-40341101),m,f,d[n+14],17,-1502002290),i,m,d[n+15],22,1236535329),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+1],5,-165796510),f,r,d[n+6],9,-1069501632),m,f,d[n+11],14,643717713),i,m,d[n+0],20,-373897302),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+5],5,-701558691),f,r,d[n+10],9,38016083),m,f,d[n+15],14,-660478335),i,m,d[n+4],20,-405537848),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+9],5,568446438),f,r,d[n+14],9,-1019803690),m,f,d[n+3],14,-187363961),i,m,d[n+8],20,1163531501),r=md5_gg(r,i=md5_gg(i,m=md5_gg(m,f,r,i,d[n+13],5,-1444681467),f,r,d[n+2],9,-51403784),m,f,d[n+7],14,1735328473),i,m,d[n+12],20,-1926607734),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+5],4,-378558),f,r,d[n+8],11,-2022574463),m,f,d[n+11],16,1839030562),i,m,d[n+14],23,-35309556),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+1],4,-1530992060),f,r,d[n+4],11,1272893353),m,f,d[n+7],16,-155497632),i,m,d[n+10],23,-1094730640),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+13],4,681279174),f,r,d[n+0],11,-358537222),m,f,d[n+3],16,-722521979),i,m,d[n+6],23,76029189),r=md5_hh(r,i=md5_hh(i,m=md5_hh(m,f,r,i,d[n+9],4,-640364487),f,r,d[n+12],11,-421815835),m,f,d[n+15],16,530742520),i,m,d[n+2],23,-995338651),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+0],6,-198630844),f,r,d[n+7],10,1126891415),m,f,d[n+14],15,-1416354905),i,m,d[n+5],21,-57434055),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+12],6,1700485571),f,r,d[n+3],10,-1894986606),m,f,d[n+10],15,-1051523),i,m,d[n+1],21,-2054922799),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+8],6,1873313359),f,r,d[n+15],10,-30611744),m,f,d[n+6],15,-1560198380),i,m,d[n+13],21,1309151649),r=md5_ii(r,i=md5_ii(i,m=md5_ii(m,f,r,i,d[n+4],6,-145523070),f,r,d[n+11],10,-1120210379),m,f,d[n+2],15,718787259),i,m,d[n+9],21,-343485551),m=safe_add(m,h),f=safe_add(f,t),r=safe_add(r,g),i=safe_add(i,e)}return Array(m,f,r,i)}function md5_cmn(d,_,m,f,r,i){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,i)),r),m)}function md5_ff(d,_,m,f,r,i,n){return md5_cmn(_&m|~_&f,d,_,r,i,n)}function md5_gg(d,_,m,f,r,i,n){return md5_cmn(_&f|m&~f,d,_,r,i,n)}function md5_hh(d,_,m,f,r,i,n){return md5_cmn(_^m^f,d,_,r,i,n)}function md5_ii(d,_,m,f,r,i,n){return md5_cmn(m^(_|~f),d,_,r,i,n)}function safe_add(d,_){var m=(65535&d)+(65535&_);return(d>>16)+(_>>16)+(m>>16)<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_}\n\nexport default MD5;\n","// placeholder for future implementation\nmodule.exports = {\n  getFromCache: () => {},\n  saveToCache: () => {}\n}\n","import DistributionAdMonitorCore from './index';\nimport each from './utils/each';\nimport { queue } from './utils/queue';\n\nexport function deferEvent(eventCollection, eventBody){\n\n\n  if (arguments.length > 2 || typeof eventCollection !== 'string') {\n    handleValidationError.call(this, 'Incorrect arguments provided to #deferEvent method');\n    return;\n  }\n  this.queue.events[\"events\"] = this.queue.events[\"events\"] || [];\n  if (eventBody)\n    eventBody.event=eventCollection;\n  this.queue.events[\"events\"].push(eventBody);\n  this.queue.capacity++;\n  if (!this.queue.timer) {\n    this.queue.start();\n  }\n  this.emit('deferEvent', \"events\", eventBody);\n  return this;\n}\n\nexport function deferEvents(eventsHash){\n  var self = this;\n\n  if (arguments.length !== 1 || typeof eventsHash !== 'object') {\n    handleValidationError.call(this, 'Incorrect arguments provided to #deferEvents method');\n    return;\n  }\n\n  each(eventsHash, function(eventList, eventCollection){\n    self.queue.events[eventCollection] = self.queue.events[eventCollection] || [];\n    self.queue.events[eventCollection] = self.queue.events[eventCollection].concat(eventList);\n    self.queue.capacity = self.queue.capacity + eventList.length;\n    if (!self.queue.timer) {\n      self.queue.start();\n    }\n  });\n  self.emit('deferEvents', eventsHash);\n  return self;\n}\n\nexport function queueCapacity(num){\n  if (!arguments.length) return this.queue.config.capacity;\n  this.queue.config.capacity = num ? Number(num): 0;\n  this.queue.check();\n  return this;\n}\n\nexport function queueInterval(num){\n  if (!arguments.length) return this.queue.config.interval;\n  this.queue.config.interval = num ? Number(num): 0;\n  this.queue.check();\n  return this;\n}\n\nexport function recordDeferredEvents(){\n  const self = this;\n  if (self.queue.capacity > 0) {\n    self.queue.pause();\n    let clonedQueueConfig = { ...self.queue.config };\n    let clonedQueueEvents = { ...self.queue.events };\n    self.queue = queue();\n    self.queue.config = clonedQueueConfig;\n    self.queue.on('flush', function(){\n      self.recordDeferredEvents();\n    });\n    self.emit('recordDeferredEvents', clonedQueueEvents);\n    self.recordEvents(clonedQueueEvents, (err, res) => {\n      if (err) {\n        self.emit('recordDeferredEventsError', err, clonedQueueEvents);\n      }\n    });\n  }\n  return self;\n}\n\nfunction handleValidationError(message){\n  this.emit('error', `Event(s) not deferred: ${message}`);\n}\n","import pkg from '../package.json';\n\nexport function initAutoTrackingCore(lib) {\n    return function (obj) {\n        const client = this;\n        const helpers = lib.helpers;\n        const utils = lib.utils;\n\n        const options = utils.extend({\n            ignoreDisabledFormFields: true,\n            ignoreFormFieldTypes: ['password'],\n            recordAjaxCalls: false,\n            recordPerformance: false,\n            recordErrors: true,\n            recordPlayVideos: true,\n            recordDOM: false,\n            recordPaidVideos: true,\n            recordAds: true,\n            recordFacebookAds: false,\n            checkAdBlock: true,\n            recordClicks: false,\n            recordClicksPositionPointer: false,\n            recordFormSubmits: false,\n            recordPageViews: true,\n            recordPageViewsOnExit: true,\n            recordScrollState: true,\n            shareUuidAcrossDomains: false,\n            collectUuid: true,\n            collectGeo: true,\n            catchError: undefined // optional, function(someError) - error handler\n        }, obj);\n\n        if (client.config.requestType === 'beaconAPI' && options.catchError) {\n            throw `You cannot use the BeaconAPI and catchError function in the same time, because BeaconAPI ignores errors. For requests with error handling - use requestType: 'fetch'`;\n            return;\n        }\n\n        if (\n            client.config.requestType === 'jsonp' // jsonp is deprecated, it's the default value from old keen's client\n        ) {\n            if (options.catchError) {\n                client.config.requestType = 'fetch';\n            } else {\n                client.config.requestType = 'beaconAPI';\n            }\n        }\n\n        let now = new Date();\n        let allTimeOnSiteS = 0;\n        let allTimeOnSiteMS = 0;\n        if (typeof document !== 'undefined') {\n            let hidden;\n            let visibilityChange;\n            if (typeof document.hidden !== \"undefined\") {\n                hidden = \"hidden\";\n                visibilityChange = \"visibilitychange\";\n            } else if (typeof document.msHidden !== \"undefined\") {\n                hidden = \"msHidden\";\n                visibilityChange = \"msvisibilitychange\";\n            } else if (typeof document.webkitHidden !== \"undefined\") {\n                hidden = \"webkitHidden\";\n                visibilityChange = \"webkitvisibilitychange\";\n            }\n\n            const handleVisibilityChange = () => {\n                if (document[hidden]) {\n                    allTimeOnSiteS += getSecondsSinceDate(now);\n                    allTimeOnSiteMS += getMiliSecondsSinceDate(now);\n                    return;\n                }\n                now = new Date();\n            }\n            if (typeof document.addEventListener !== \"undefined\" ||\n                hidden !== undefined) {\n                document.addEventListener(visibilityChange, handleVisibilityChange, false);\n            }\n        }\n\n        const cookie = new utils.cookie('distribution-adops');\n\n        const domainName = helpers.getDomainName(window.location.hostname);\n        const cookieDomain = domainName && options.shareUuidAcrossDomains ? {\n            domain: '.' + domainName\n        } : {};\n\n        let uuid;\n        if (options.collectUuid) {\n            uuid = cookie.get('uuid');\n            if (!uuid) {\n                uuid = helpers.getUniqueId();\n                cookie.set('uuid', uuid, cookieDomain);\n            }\n        }\n\n        let page_id;\n        if (!page_id) {\n            page_id = helpers.getUniqueId();\n        }\n\n        let geo = {};\n        if (options.collectGeo === true) {\n\n            if (typeof geoip_city === \"function\")\n                geo.city = geoip_city();\n\n            if (typeof geoip_region === \"function\")\n                geo.region = geoip_region();\n\n            if (typeof geoip_country_name === \"function\")\n                geo.country = geoip_country_name();\n\n            if (typeof geoip_latitude === \"function\" && typeof geoip_longitude === \"function\")\n                geo.location = {\"lat\": geoip_latitude(), \"lon\": geoip_longitude()};\n        }\n        let is_adblock_active = false;\n        if (options.checkAdBlock === true) {\n            let ad = document.createElement('div');\n\n            ad.id = 'adcontent';\n\n            document.body.appendChild(ad);\n\n            is_adblock_active = (ad.offsetLeft === 0 && ad.offsetTop === 0);\n        }\n\n        let initialReferrer = cookie.get('initialReferrer');\n        if (!initialReferrer) {\n            initialReferrer = document && document.referrer || undefined;\n            cookie.set('initialReferrer', initialReferrer, cookieDomain);\n        }\n\n        let scrollState = {};\n        if (options.recordScrollState) {\n            scrollState = helpers.getScrollState();\n            utils.listener('window').on('scroll', () => {\n                scrollState = helpers.getScrollState(scrollState);\n            });\n        }\n\n        const addons = [];\n\n        client.extendEvents(function () {\n            const browserProfile = helpers.getBrowserProfile();\n            return {\n                tracked_by: pkg.name + '-' + pkg.version,\n                local_time_full: new Date().toISOString(),\n                page_id: page_id,\n                user: {\n                    uuid\n                },\n                geo: geo,\n                page: {\n                    title: document ? document.title : null,\n                    description: browserProfile.description,\n                    scroll_state: scrollState,\n                    time_on_page: allTimeOnSiteS > 0 ? allTimeOnSiteS : getSecondsSinceDate(now),\n                    time_on_page_ms: allTimeOnSiteMS > 0 ? allTimeOnSiteMS : getMiliSecondsSinceDate(now)\n                },\n                project: window.MURDOCK_PROJECT !== 'undefined' ? window.MURDOCK_PROJECT : null,\n                user_agent: navigator.userAgent,\n                tech: {\n                    profile: browserProfile,\n                    is_adblock_active: is_adblock_active\n                },\n                url: {\n                    full: window ? window.location.href : '',\n                },\n\n                referrer: {\n                    initial: initialReferrer,\n                    full: document ? document.referrer : '',\n                },\n\n                time: {\n                    timestamp: new Date().toISOString(),\n                    time_zone: Intl.DateTimeFormat().resolvedOptions().timeZone\n                },\n\n                dist: {\n                    timestamp: new Date().toISOString(),\n                    addons,\n                }\n            };\n        });\n\n        if (options.recordClicks === true) {\n            utils.listener('a, a *').on('click', function (e) {\n                const el = e.target;\n                let event = {\n                    element: helpers.getDomNodeProfile(el),\n                    local_time_full: new Date().toISOString(),\n                };\n\n                // pointer position tracking\n                if (options.recordClicksPositionPointer === true) {\n                    const pointer = {\n                        x_position: e.pageX,\n                        y_position: e.pageY,\n                    }\n                    event = {...event, pointer};\n                }\n\n                if (options.catchError) {\n                    return client\n                        .deferEvent('clicks', event\n                        ).catch(err => {\n                            options.catchError(err);\n                        });\n                }\n\n                return client\n                    .deferEvent('clicks', event);\n            });\n        }\n\n\n        if (options.recordPageViews === true) {\n            if (options.catchError) {\n                client\n                    .deferEvent('pageviews')\n                    .catch(err => {\n                        options.catchError(err);\n                    });\n            } else {\n                client\n                    .deferEvent('pageviews');\n            }\n        }\n\n        if (options.recordPageViewsOnExit && typeof window !== 'undefined') {\n            window.addEventListener('beforeunload', () => {\n                //client.config.requestType = 'beaconAPI'; // you can run beforeunload only with beaconAPI\n                client.deferEvent(\n                    'pageview_exit'\n                );\n                client.recordDeferredEvents()\n            });\n        }\n\n\n        if (options.recordFacebookAds === true) {\n            client.deferEvent('fb_ads');\n\n        }\n        if (options.recordPlayVideos === true) {\n\n            const record_video_event = function (type, video) {\n                is_play_recorded = true;\n                let event_data = {\n                    event_data: {\n                        \"event\": type,\n                        \"url\": video.src,\n                        \"duration\": parseInt(video.duration),\n                        \"current_time\": parseInt(video.currentTime),\n                    }\n                };\n                client.deferEvent(\n                    'videos',\n                    event_data\n                );\n            };\n\n            let is_play_recorded = false;\n            const send_play_record_event = function (video) {\n                if (is_play_recorded === true)\n                    return;\n                is_play_recorded = true;\n                record_video_event(\"play\", video);\n            };\n            const locateVideoElement = function _self(DOM) {\n                if (!DOM)\n                    return;\n                let video = DOM.querySelector(\"video\");\n                if (video) return video;\n                let iframes = DOM.querySelectorAll(\"iframe\");\n                for (let iframe of iframes) {\n                    try {\n                        video = _self(iframe.contentDocument.body);\n                    } catch (e) {\n                    }\n                    if (video) return video\n                }\n                return null\n            };\n            let observers = [];\n            let observe = function _self(DOM = document.body, _window = window, debug = false) {\n                const gotVideo = function (video) {\n                    const isVideoPlaying = !!(video.currentTime > 0 && !video.paused && !video.ended && video.readyState > 2);\n                    //if(isVideoPlaying)\n                    //send_play_record_event(video);\n\n                    video.addEventListener('play', function () {\n                        send_play_record_event(this);\n                    });\n                    /*\n                    video.addEventListener('timeupdate', function() {\n                      let percentage_progress = this.currentTime * 100 / this.duration;\n                      if(percentage_progress===25){\n                        record_video_event(\"first_quartile\",this);\n                      }\n                      else if(percentage_progress===50){\n                        record_video_event(\"mid_point\",this);\n                      }\n                      else if(percentage_progress===75){\n                        record_video_event(\"third_quartile\",this);\n                      }\n                    });\n\n                     */\n                    video.addEventListener('seeking', function () {\n                        record_video_event(\"seeking\", this);\n                    });\n                    video.addEventListener('end', function () {\n                        record_video_event(\"end\", this);\n                    });\n\n                    observers.forEach(obs => {\n                        obs.disconnect()\n                    })\n                };\n\n                {\n                    // Existing video\n                    let video = locateVideoElement(DOM);\n                    if (video) gotVideo(video)\n                }\n                {\n                    // Existing iframe\n                    DOM.querySelectorAll(\"iframe\").forEach(iframe => {\n                        try {\n                            iframe.contentWindow.onload = function () {\n                                _self(iframe.contentDocument.body, iframe.contentWindow)\n                            }\n                        } catch (e) {\n\n                        }\n\n                    })\n                }\n                let callback = function (mutationList) {\n                    mutationList.forEach((mutation) => {\n                        mutation.addedNodes.forEach((node) => {\n                            const search = function (node, tag) {\n                                if (node.tagName && node.tagName.toUpperCase() === tag.toUpperCase()) {\n                                    return node\n                                }\n                                return node.querySelector && node.querySelector(tag)\n                            };\n\n                            {\n                                // Dynamically added video\n                                let video = search(node, \"video\");\n                                if (video) gotVideo(video)\n                            }\n\n                            {\n                                // Dynamically added iframe\n                                let iframe = search(node, \"iframe\");\n                                if (iframe) {\n                                    try {\n                                        iframe.contentWindow.setTimeout(function () {\n\n                                            _self(iframe.contentDocument.body, iframe.contentWindow)\n\n                                        }, 1000);\n                                    } catch (e) {\n\n                                    }\n                                }\n                            }\n\n                        })\n                    })\n                };\n                let observer = new _window.MutationObserver(callback);\n                observer.observe(DOM, {\n                    childList: true,\n                    attributes: false,\n                    subtree: true\n                });\n                observers.push(observer);\n                window.observers = observers;\n            };\n            observe(document.body);\n        }\n\n        if (options.recordDOM === true) {\n            client.deferEvent({\n                collection: 'DOM',\n                event: {\n                    \"dom\": {\n                        \"head\": document.head.innerHTML,\n                        \"body\": document.body.innerHTML,\n                    }\n                }\n            });\n        }\n\n\n        if (options.recordPaidVideos === true) {\n            let adId, creativeId;\n            window.addEventListener(\"message\", event => {\n                if (/^ima:\\/\\//.test(event.data)) {\n                    let json_data = JSON.parse(event.data.substr(6));\n                    if (json_data && json_data.name === \"adsManager\" && [\"remainingTime\", \"adProgress\"].indexOf(json_data.type) === -1) {\n\n                        if (\"adData\" in json_data.data) {\n                            creativeId = json_data.data[\"adData\"][\"creativeId\"];\n                            adId = json_data.data[\"adData\"][\"adId\"];\n\n                        }\n                        let ad_data = JSON.parse(JSON.stringify(json_data.data));\n                        ad_data.creativeId = creativeId;\n                        ad_data.adId = adId;\n                        let event_data = {ad_event: json_data.type, ad_data: ad_data};\n                        client.deferEvent('event_data', event_data);\n\n                    }\n                } else if (\"type\" in event && event.type === \"AdError\") {\n                    let event_data = {\n                        ad_event: \"vast_error\", ad_data: {\n                            \"vast_message\": event.message, \"creativeId\": creativeId, \"adId\": adId\n                        }\n                    };\n                    client.deferEvent('event_data', event_data);\n                }\n            });\n\n        }\n\n        if (options.recordErrors === true) {\n\n            window.onerror = function (message, file, line, column, errorObj) {\n                let error_data = {msg: message, file: file, line: line, column: column};\n                if (errorObj) {\n                    error_data.trace = errorObj.stack\n                }\n\n                client.deferEvent('errors', {event_data: error_data});\n                return false;\n            };\n        }\n        if (options.recordAds === true) {\n\n            if (window.googletag && window.googletag.apiReady) {\n                window.googletag.pubads().addEventListener('slotRenderEnded', function (event) {\n                    let resp = {\n                        event_data: {\n                            advertiserId: event.advertiserId,\n                            size: event.size,\n                            campaignId: event.campaignId,\n                            creativeId: event.creativeId,\n                            companyIds: event.companyIds,\n                            sourceAgnosticLineItemId: event.sourceAgnosticLineItemId,\n                            sourceAgnosticCreativeId: event.sourceAgnosticCreativeId,\n                            lineItemId: event.lineItemId,\n                            isEmpty: event.isEmpty,\n                            labelIds: event.labelIds,\n                            isBackfill: event.isBackfill,\n                            dfpPath: event.slot.getSlotId().toString()\n                        }\n\n                    };\n                    client.deferEvent('adview', resp);\n                });\n\n            }\n\n        }\n\n        if (options.recordPerformance === true) {\n            const record_performance = function (entry) {\n                try {\n                    let event = {\n                        event_data: {\n                            \"name\": entry.name,\n                            \"type\": entry.initiatorType,\n                            \"duration\": entry.duration,\n                            \"transfer_size\": entry.transferSize,\n                        }\n                    };\n                    client.deferEvent('performance', event);\n                } catch (e) {\n\n                }\n            };\n            if (\"performance\" in window) {\n                // OK, yes. Check PerformanceObserver support\n                if (\"PerformanceObserver\" in window) {\n                    var observer = new PerformanceObserver(list => {\n                        list.getEntries().forEach(entry => {\n                            if ([\"iframe\", \"navigation\", \"xmlhttprequest\", \"fetch\"].indexOf(entry.initiatorType) >= 0) {\n                                record_performance(entry)\n                            }\n\n                        })\n                    });\n                    observer.observe({entryTypes: ['resource', 'navigation']});\n                }\n                var pageNav = performance.getEntriesByType(\"navigation\")[0];\n                record_performance(pageNav)\n            }\n\n\n        }\n        if (options.recordAjaxCalls === true) {\n            XMLHttpRequest.prototype._send = XMLHttpRequest.prototype.send;\n\n            XMLHttpRequest.prototype.send = function (data) {\n                const startTime = new Date();\n\n                this.addEventListener('load', () => {\n                    const endTime = new Date();\n                    const costTime = endTime - startTime;\n\n\n                    let event = {\n                        event_data: {\n                            cost_time: costTime,\n                            url: this.responseURL,\n                            status: this.status\n                        }\n                    };\n                    client.deferEvent('ajax', event);\n\n                });\n\n                this._send(data);\n            };\n\n        }\n        return client;\n    };\n}\n\nfunction getSecondsSinceDate(date) {\n    return Math.round(getMiliSecondsSinceDate(date) / 1000);\n}\n\nfunction getMiliSecondsSinceDate(date) {\n    return new Date().getTime() - date.getTime();\n}\n","import { getScreenProfile } from './getScreenProfile';\nimport { getWindowProfile } from './getWindowProfile';\n\nexport function getBrowserProfile() {\n  return {\n    'cookies'    : ('undefined' !== typeof navigator.cookieEnabled) ? navigator.cookieEnabled : false,\n    'codeName'   : navigator.appCodeName,\n    'description': getDocumentDescription(),\n    'language'   : navigator.language,\n    'name'       : navigator.appName,\n    'online'     : navigator.onLine,\n    'platform'   : navigator.platform,\n    'useragent'  : navigator.userAgent,\n    'version'    : navigator.appVersion,\n    'doNotTrack' : navigator.doNotTrack,\n    'screen'     : getScreenProfile(),\n    'window'     : getWindowProfile()\n  }\n}\n\nfunction getDocumentDescription() {\n  var el;\n  if (document && typeof document.querySelector === 'function') {\n    el = document.querySelector('meta[name=\"description\"]');\n  }\n  return el ? el.content : '';\n}\n","export function getDatetimeIndex(input){\n  var date = input || new Date();\n  return {\n    'hour_of_day'  : date.getHours(),\n    'day_of_week'  : parseInt( 1 + date.getDay() ),\n    'day_of_month' : date.getDate(),\n    'month'        : parseInt( 1 + date.getMonth() ),\n    'year'         : date.getFullYear()\n  };\n}\n","function extractHostname(url) {\n    var hostname;\n    //find & remove protocol (http, ftp, etc.) and get hostname\n\n    if (url.indexOf(\"://\") > -1) {\n        hostname = url.split('/')[2];\n    }\n    else {\n        hostname = url.split('/')[0];\n    }\n\n    //find & remove port number\n    hostname = hostname.split(':')[0];\n    //find & remove \"?\"\n    hostname = hostname.split('?')[0];\n\n    return hostname;\n}\n\n// To address those who want the \"root domain,\" use this function:\nexport function getDomainName(url) {\n    var domain = extractHostname(url),\n        splitArr = domain.split('.'),\n        arrLen = splitArr.length;\n\n    //extracting the root domain here\n    //if there is a subdomain\n    if (arrLen > 2) {\n        domain = splitArr[arrLen - 2] + '.' + splitArr[arrLen - 1];\n        //check to see if it's using a Country Code Top Level Domain (ccTLD) (i.e. \".me.uk\")\n        if (splitArr[arrLen - 2].length == 2 && splitArr[arrLen - 1].length == 2) {\n            //this is using a ccTLD\n            domain = splitArr[arrLen - 3] + '.' + domain;\n        }\n    }\n    return domain;\n}\n","import { getDomNodePath } from './getDomNodePath';\n\nexport function getDomNodeProfile(el) {\n  return {\n    action: el.action,\n    class: el.className,\n    href: getElementProps(el, 'href'),\n    id: getElementProps(el, 'id'),\n    event_key: getElementProps(el, 'data-event-key'),\n    method: el.method,\n    name: el.name,\n    node_name: el.nodeName,\n    selector: getDomNodePath(el),\n    text: getElementProps(el, 'text'),\n    title: getElementProps(el, 'title'),\n    type: el.type,\n    x_position: el.offsetLeft || el.clientLeft || null,\n    y_position: el.offsetTop || el.clientTop || null\n  };\n}\n\nconst getElementProps = (el, prop) => {\n  if (el[prop]) {\n    return el[prop];\n  }\n  if (el.hasAttribute && el.hasAttribute(prop)) {\n    return el.getAttribute(prop);\n  }\n  if (el.parentNode) {\n    return getElementProps(el.parentNode, prop);\n  }\n  return null;\n};\n","import extend from '../utils/extend';\n\nexport function getScrollState(obj){\n  var config = typeof obj === 'object' ? obj : {};\n  var state = extend({\n    pixel: 0,\n    pixel_max: 0,\n    ratio: null,\n    ratio_max: null\n  }, config);\n\n  if (typeof window !== undefined || typeof document !== undefined) {\n    state.pixel = getScrollOffset() + getWindowHeight();\n    if (state.pixel > state.pixel_max) {\n      state.pixel_max = state.pixel;\n    }\n    state.ratio = parseFloat(Number(state.pixel / getScrollableArea()).toFixed(2));\n    state.ratio_max = parseFloat(Number(state.pixel_max / getScrollableArea()).toFixed(2));\n  }\n\n  return state;\n}\n\nfunction getScrollableArea() {\n  var body = document.body;\n  var html = document.documentElement;\n  return Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight ) || null;\n}\n\nfunction getScrollOffset() {\n  return (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;\n}\n\nfunction getWindowHeight() {\n  return window.innerHeight || document.documentElement.clientHeight;\n}\n","export function getUniqueId() {\n  // uuidv4\n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n    // browser\n    return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n      (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    )\n  } else {\n    // node & older browsers\n    let str = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n    return str.replace(/[xy]/g, function(c) {\n      let r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n      return v.toString(16);\n    });\n  }\n}\n","import Cookies from 'js-cookie';\nimport extend from './extend';\n\nexport const cookie = function(str){\n  if (!arguments.length) return;\n  if (this instanceof cookie === false) {\n    return new cookie(str);\n  }\n\n  this.config = {\n    key: str,\n    options: {\n      expires: 365\n    }\n  };\n  this.data = this.get();\n  return this;\n};\n\ncookie.prototype.get = function(str){\n  var data = {};\n\n  if (Cookies.get(this.config.key)) {\n    data = Cookies.getJSON(this.config.key);\n  }\n  if (str && typeof data === 'object' && typeof data !== null) {\n    return (typeof data[str] !== 'undefined') ? data[str] : null;\n  }\n  else {\n    return data;\n  }\n};\n\ncookie.prototype.set = function(str, value, options){\n  if (!arguments.length || !this.enabled()) return this;\n  if (typeof str === 'string' && arguments.length >= 2) {\n    this.data[str] = value ? value : null;\n  }\n  else if (typeof str === 'object' && arguments.length === 1) {\n    extend(this.data, str);\n  }\n  Cookies.set(\n    this.config.key,\n    this.data,\n    extend(this.config.options, options || {})\n  );\n  return this;\n};\n\ncookie.prototype.expire = function(daysUntilExpire){\n  if (daysUntilExpire) {\n    Cookies.set(\n      this.config.key,\n      this.data,\n      extend(this.config.options, { expires: daysUntilExpire })\n    );\n  } else {\n    Cookies.remove(this.config.key);\n    this.data = {};\n  }\n  return this;\n};\n\ncookie.prototype.options = function(obj){\n  if (!arguments.length) return this.config.options;\n  this.config.options = (typeof obj === 'object') ? obj : {};\n  return this;\n};\n\ncookie.prototype.enabled = function(){\n  return navigator.cookieEnabled;\n};\n","/*!\n * JavaScript Cookie v2.1.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n(function (factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t} else if (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t} else {\n\t\tvar _OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = _OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\treturn (document.cookie = [\n\t\t\t\t\tkey, '=', value,\n\t\t\t\t\tattributes.expires && '; expires=' + attributes.expires.toUTCString(), // use expires attribute, max-age is not supported by IE\n\t\t\t\t\tattributes.path    && '; path=' + attributes.path,\n\t\t\t\t\tattributes.domain  && '; domain=' + attributes.domain,\n\t\t\t\t\tattributes.secure ? '; secure' : ''\n\t\t\t\t].join(''));\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.get = api.set = api;\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","export function timer(num){\n  if (this instanceof timer === false) {\n    return new timer(num);\n  }\n  this.count = num || 0;\n  return this;\n}\n\ntimer.prototype.start = function(){\n  var self = this;\n  this.pause();\n  this.interval = setInterval(function(){\n    self.count++;\n  }, 1000);\n  return this;\n};\n\ntimer.prototype.pause = function(){\n  clearInterval(this.interval);\n  return this;\n};\n\ntimer.prototype.value = function(){\n  return this.count;\n};\n\ntimer.prototype.clear = function(){\n  this.count = 0;\n  return this;\n};\n"],"sourceRoot":""}